{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\SSR\\\\Modal\\\\items\\\\ReviewItem.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// App\nimport React from \"react\";\nimport RatingInput from \"../../Elements/RatingInput\";\nimport Button from \"../../Elements/Button.js\";\nimport { connect } from \"react-redux\";\nimport * as myArticlesActions from \"../../redux/actions/myarticles\";\nimport { bindActionCreators } from \"redux\";\nimport { CSSTransitionGroup } from \"react-transition-group\"; //IMGS\n\nimport AngleUp from \"../../img/angle-up.png\";\nimport AngleDown from \"../../img/angle-down.png\";\nimport LoadingFixed from \"../../Elements/LoadingFixed\";\n\nclass ReviewItem extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      reviewId: false,\n      comment: \"\",\n      rating: 0,\n      isFetching: false\n    });\n\n    _defineProperty(this, \"saveReview\", () => {\n      this.setState({\n        isFetching: true\n      }, () => {\n        this.props.myArticlesActions.saveReview({\n          _id: this.state.reviewId,\n          comment: this.state.comment,\n          rating: this.state.rating\n        }, this.props.article, this.props.userReview._id, this.props.user.apiToken).then(data => {\n          this.setState({\n            isFetching: false\n          });\n          this.props.close();\n        });\n      });\n    });\n  }\n\n  componentDidMount() {\n    if (!!this.props.review) this.setState({\n      reviewId: this.props.review._id,\n      comment: this.props.review.comment,\n      rating: this.props.review.rating\n    });\n  }\n\n  componentDidUpdate(a) {\n    if (JSON.stringify(this.props.review) !== JSON.stringify(a.review)) this.setState({\n      reviewId: this.props.review._id,\n      comment: this.props.review.comment,\n      rating: this.props.review.rating\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"review-item padding\",\n      children: [/*#__PURE__*/_jsxDEV(LoadingFixed, {\n        isLoading: this.state.isFetching\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"f-14 mb-2 d-flex align-items-center\",\n        children: [this.props.userReview.name.last, \" \", this.props.userReview.name.first, \" \", this.props.userReview.name.middle, this.props.multiple && /*#__PURE__*/_jsxDEV(\"img\", {\n          onClick: () => {\n            if (this.props.isOpen) this.props.open(false);else this.props.open(this.props.index);\n          },\n          className: \"ml-2\",\n          src: this.state.isOpen ? AngleUp : AngleDown,\n          style: {\n            cursor: \"pointer\"\n          },\n          alt: \"AngleUp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CSSTransitionGroup, {\n        transitionName: \"height-animation-item\",\n        transitionEnterTimeout: 300,\n        transitionLeaveTimeout: 300,\n        style: {\n          display: \"contents\"\n        },\n        children: this.props.isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"mx-auto d-block\",\n            style: {\n              height: \"164px\"\n            },\n            maxLength: \"1500\",\n            value: this.state.comment,\n            onChange: e => {\n              this.setState({\n                comment: e.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: \"\\u0420\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-between align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(RatingInput, {\n              value: this.state.rating,\n              onClick: val => {\n                this.setState({\n                  rating: val\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              paddingVertical: \"7px\",\n              type: \"fill\",\n              onClick: this.saveReview,\n              children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user\n  };\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    myArticlesActions: bindActionCreators(myArticlesActions, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReviewItem);","map":{"version":3,"sources":["E:/SSR/Modal/items/ReviewItem.js"],"names":["React","RatingInput","Button","connect","myArticlesActions","bindActionCreators","CSSTransitionGroup","AngleUp","AngleDown","LoadingFixed","ReviewItem","Component","reviewId","comment","rating","isFetching","setState","props","saveReview","_id","state","article","userReview","user","apiToken","then","data","close","componentDidMount","review","componentDidUpdate","a","JSON","stringify","render","name","last","first","middle","multiple","isOpen","open","index","cursor","display","height","e","target","value","val","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["// App\r\nimport React from \"react\";\r\nimport RatingInput from \"../../Elements/RatingInput\";\r\nimport Button from \"../../Elements/Button.js\";\r\nimport { connect } from \"react-redux\";\r\nimport * as myArticlesActions from \"../../redux/actions/myarticles\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { CSSTransitionGroup } from \"react-transition-group\";\r\n//IMGS\r\nimport AngleUp from \"../../img/angle-up.png\";\r\nimport AngleDown from \"../../img/angle-down.png\";\r\nimport LoadingFixed from \"../../Elements/LoadingFixed\";\r\nclass ReviewItem extends React.Component {\r\n  state = {\r\n    reviewId: false,\r\n    comment: \"\",\r\n    rating: 0,\r\n    isFetching: false,\r\n  };\r\n  saveReview = () => {\r\n    this.setState({ isFetching: true }, () => {\r\n      this.props.myArticlesActions\r\n        .saveReview(\r\n          {\r\n            _id: this.state.reviewId,\r\n            comment: this.state.comment,\r\n            rating: this.state.rating,\r\n          },\r\n          this.props.article,\r\n          this.props.userReview._id,\r\n          this.props.user.apiToken\r\n        )\r\n        .then((data) => {\r\n          this.setState({ isFetching: false });\r\n          this.props.close();\r\n        });\r\n    });\r\n  };\r\n  componentDidMount() {\r\n    if (!!this.props.review)\r\n      this.setState({\r\n        reviewId: this.props.review._id,\r\n        comment: this.props.review.comment,\r\n        rating: this.props.review.rating,\r\n      });\r\n  }\r\n  componentDidUpdate(a) {\r\n    if (JSON.stringify(this.props.review) !== JSON.stringify(a.review))\r\n      this.setState({\r\n        reviewId: this.props.review._id,\r\n        comment: this.props.review.comment,\r\n        rating: this.props.review.rating,\r\n      });\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"review-item padding\">\r\n        <LoadingFixed isLoading={this.state.isFetching} />\r\n        <div className=\"f-14 mb-2 d-flex align-items-center\">\r\n          {this.props.userReview.name.last} {this.props.userReview.name.first}{\" \"}\r\n          {this.props.userReview.name.middle}\r\n          {this.props.multiple && (\r\n            <img\r\n              onClick={() => {\r\n                if (this.props.isOpen) this.props.open(false);\r\n                else this.props.open(this.props.index);\r\n              }}\r\n              className=\"ml-2\"\r\n              src={this.state.isOpen ? AngleUp : AngleDown}\r\n              style={{\r\n                cursor: \"pointer\",\r\n              }}\r\n              alt=\"AngleUp\"\r\n            />\r\n          )}\r\n        </div>\r\n        <CSSTransitionGroup\r\n          transitionName=\"height-animation-item\"\r\n          transitionEnterTimeout={300}\r\n          transitionLeaveTimeout={300}\r\n          style={{\r\n            display: \"contents\",\r\n          }}\r\n        >\r\n          {this.props.isOpen && (\r\n            <div>\r\n              <textarea\r\n                className=\"mx-auto d-block\"\r\n                style={{\r\n                  height: \"164px\",\r\n                }}\r\n                maxLength=\"1500\"\r\n                value={this.state.comment}\r\n                onChange={(e) => {\r\n                  this.setState({ comment: e.target.value });\r\n                }}\r\n              ></textarea>\r\n              <div className=\"mt-2\">Рейтинг:</div>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <RatingInput\r\n                  value={this.state.rating}\r\n                  onClick={(val) => {\r\n                    this.setState({ rating: val });\r\n                  }}\r\n                />\r\n                <Button\r\n                  paddingVertical=\"7px\"\r\n                  type=\"fill\"\r\n                  onClick={this.saveReview}\r\n                >\r\n                  Сохранить\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CSSTransitionGroup>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    myArticlesActions: bindActionCreators(myArticlesActions, dispatch),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReviewItem);\r\n"]},"metadata":{},"sourceType":"module"}