{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\SSR\\\\Modal\\\\FeedbackModal.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n// App\nimport React from \"react\";\nimport Modal from \"react-modal\";\nimport Button from \"../Elements/Button\";\nimport Input from \"../Elements/Input\";\nimport Loading from \"../Elements/Loading\";\nimport settings from \"../config/settings.js\";\nimport api from \"../config/api.js\";\nimport CloseSVG from \"../img/close.svg\";\nimport { toast } from \"react-toastify\";\n\nvar FeedbackModal = /*#__PURE__*/function (_React$Component) {\n  _inherits(FeedbackModal, _React$Component);\n\n  var _super = _createSuper(FeedbackModal);\n\n  function FeedbackModal() {\n    var _this;\n\n    _classCallCheck(this, FeedbackModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isMailSend: false,\n      isFetching: false,\n      name: \"\",\n      phone: \"\"\n    });\n\n    return _this;\n  }\n\n  _createClass(FeedbackModal, [{\n    key: \"send\",\n    value: function send() {\n      var _this2 = this;\n\n      if (this.state.phone.length !== 11) {\n        toast.error(\"Введите номер телефона\");\n        return 0;\n      }\n\n      if (!this.state.name.trim()) {\n        toast.error(\"Введите имя\");\n        return 0;\n      }\n\n      this.setState({\n        isFetching: true\n      }, function () {\n        fetch(\"\".concat(api.urlApi, \"/api/page/sendMailCall\"), {\n          method: \"post\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            phone: _this2.state.phone,\n            name: _this2.state.name\n          })\n        }).then(function (response) {\n          return response.json();\n        }).then(function (_ref) {\n          var error = _ref.error;\n\n          if (!error) {\n            _this2.setState({\n              isFetching: false\n            });\n\n            _this2.props.onRequestClose();\n\n            toast.success(\"Заказ звонка совершен успешно.Ожидайте звонка.\");\n          }\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.props.isOpen,\n        onRequestClose: this.props.onRequestClose,\n        className: \"col-10 col-md-6 col-lg-4 col-xl-3 col-md-6\",\n        style: settings.stylesModals,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"m-0 font-weight-normal text-center\",\n          children: \"\\u0417\\u0430\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"phone\",\n          className: \"my-2\",\n          onChange: function onChange(val) {\n            _this3.setState({\n              phone: val\n            });\n          },\n          value: this.state.phone,\n          placeholder: \"+7 (_ _ _) _ _ _ - _ _ - _ _\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          value: this.state.name,\n          onChange: function onChange(e) {\n            _this3.setState({\n              name: e.target.value\n            });\n          },\n          className: \"my-2\",\n          placeholder: \"\\u0418\\u043C\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"d-block text-center f-14 mb-2 \\n            \".concat(this.state.isMailSend ? \"visible\" : \"invisible\"),\n            children: \"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435 \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u043E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 11\n          }, this), this.state.isFetching && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"small-loading\",\n            children: /*#__PURE__*/_jsxDEV(Loading, {\n              isLoading: this.state.isFetching\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), !this.state.isFetching && /*#__PURE__*/_jsxDEV(Button, {\n            type: \"fill\",\n            paddingVertical: \"11px\",\n            paddingHorizontal: \"25px\",\n            onClick: function onClick() {\n              _this3.send();\n            },\n            children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: CloseSVG,\n          className: \"close-svg\",\n          onClick: this.props.onRequestClose\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return FeedbackModal;\n}(React.Component);\n\nexport default FeedbackModal;","map":{"version":3,"sources":["E:/SSR/Modal/FeedbackModal.js"],"names":["React","Modal","Button","Input","Loading","settings","api","CloseSVG","toast","FeedbackModal","isMailSend","isFetching","name","phone","state","length","error","trim","setState","fetch","urlApi","method","headers","Accept","body","JSON","stringify","then","response","json","props","onRequestClose","success","isOpen","stylesModals","val","e","target","value","send","Component"],"mappings":"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","sourcesContent":["// App\r\nimport React from \"react\";\r\nimport Modal from \"react-modal\";\r\nimport Button from \"../Elements/Button\";\r\nimport Input from \"../Elements/Input\";\r\nimport Loading from \"../Elements/Loading\";\r\nimport settings from \"../config/settings.js\";\r\nimport api from \"../config/api.js\";\r\nimport CloseSVG from \"../img/close.svg\";\r\nimport { toast } from \"react-toastify\";\r\nclass FeedbackModal extends React.Component {\r\n  state = {\r\n    isMailSend: false,\r\n    isFetching: false,\r\n    name: \"\",\r\n    phone: \"\",\r\n  };\r\n  send() {\r\n    if (this.state.phone.length !== 11) {\r\n      toast.error(\"Введите номер телефона\");\r\n      return 0;\r\n    }\r\n    if (!this.state.name.trim()) {\r\n      toast.error(\"Введите имя\");\r\n      return 0;\r\n    }\r\n\r\n    this.setState({ isFetching: true }, () => {\r\n      fetch(`${api.urlApi}/api/page/sendMailCall`, {\r\n        method: \"post\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          phone: this.state.phone,\r\n          name: this.state.name,\r\n        }),\r\n      })\r\n        .then((response) => response.json())\r\n        .then(({ error }) => {\r\n          if (!error) {\r\n            this.setState({ isFetching: false });\r\n            this.props.onRequestClose();\r\n            toast.success(\"Заказ звонка совершен успешно.Ожидайте звонка.\");\r\n          }\r\n        });\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <Modal\r\n        isOpen={this.props.isOpen}\r\n        onRequestClose={this.props.onRequestClose}\r\n        className=\"col-10 col-md-6 col-lg-4 col-xl-3 col-md-6\"\r\n        style={settings.stylesModals}\r\n      >\r\n        <h3 className=\"m-0 font-weight-normal text-center\">Заказать звонок</h3>\r\n        <Input\r\n          type=\"phone\"\r\n          className=\"my-2\"\r\n          onChange={(val) => {\r\n            this.setState({ phone: val });\r\n          }}\r\n          value={this.state.phone}\r\n          placeholder=\"+7 (_ _ _) _ _ _ - _ _ - _ _\"\r\n        />\r\n        <Input\r\n          type=\"text\"\r\n          value={this.state.name}\r\n          onChange={(e) => {\r\n            this.setState({ name: e.target.value });\r\n          }}\r\n          className=\"my-2\"\r\n          placeholder=\"Имя\"\r\n        />\r\n        <p className=\"text-right\">\r\n          <span\r\n            className={`d-block text-center f-14 mb-2 \r\n            ${this.state.isMailSend ? `visible` : `invisible`}`}\r\n          >\r\n            Сообщение отправлено\r\n          </span>\r\n          {this.state.isFetching && (\r\n            <div className=\"small-loading\">\r\n              <Loading isLoading={this.state.isFetching} />\r\n            </div>\r\n          )}\r\n          {!this.state.isFetching && (\r\n            <Button\r\n              type=\"fill\"\r\n              paddingVertical={\"11px\"}\r\n              paddingHorizontal={\"25px\"}\r\n              onClick={() => {\r\n                this.send();\r\n              }}\r\n            >\r\n              Отправить\r\n            </Button>\r\n          )}\r\n        </p>\r\n        <img\r\n          src={CloseSVG}\r\n          className=\"close-svg\"\r\n          onClick={this.props.onRequestClose}\r\n        />\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FeedbackModal;\r\n"]},"metadata":{},"sourceType":"module"}