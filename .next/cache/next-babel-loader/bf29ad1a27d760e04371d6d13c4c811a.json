{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\SSR\\\\pages\\\\register.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// App\nimport React from \"react\";\nimport Input from \"../Elements/Input\";\nimport configApi from \"../config/api\";\nimport { toast } from \"react-toastify\";\nimport { withCookies } from \"react-cookie\"; // Elements\n\nimport { CSSTransitionGroup } from \"react-transition-group\";\nimport Button from \"../Elements/Button\";\nimport InputPhone from \"../Elements/InputPhone\"; // Router\n\nimport Link from \"../Elements/Link\";\nimport { connect } from \"react-redux\";\n\nclass Register extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      type: \"cargo\",\n      country: 1,\n      email: \"\",\n      firstName: \"\",\n      middleName: \"\",\n      lastName: \"\",\n      phone: \"\",\n      password: \"\",\n      error: false,\n      errors: [],\n      isVerified: false\n    });\n  }\n\n  register() {\n    if (this.state.isVerified === \"success\") {\n      this.setState({\n        isFetching: true\n      });\n      fetch(`${configApi.urlApi}/auth/register`, {\n        method: \"post\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: this.state.email,\n          phone: this.state.phone,\n          country: this.state.country,\n          type: this.state.type,\n          firstName: this.state.firstName,\n          middleName: this.state.middleName,\n          lastName: this.state.lastName,\n          password: this.state.password\n        })\n      }).then(response => response.json()).then(data => {\n        if (data.error) {\n          if (data.error) // data.errors.map((item) => {\n            //   toast.error(item.msg);\n            // });\n            this.setState({\n              error: true,\n              errors: data.errors\n            });\n        } else {\n          toast.success(\"Регистрация прошла успешно\");\n          this.props.cookies.set(\"apiToken\", data.token, {\n            path: \"/\"\n          });\n          window.location = \"/profile/info\";\n        }\n\n        this.setState({\n          isFetching: false\n        });\n      });\n    } else toast.error(\"Подтвердите номер телефона\");\n  }\n\n  render() {\n    // let selectCountry = countryList.filter((item) => item.value !== 1);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"register-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"register-title\",\n        children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"register-form col-12 col-sm-9 col-md-6 col-lg-5 col-xl-4 mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row tabs justify-content-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `tab f-16 left-angle ${this.state.type === \"carrier\" ? \"active \" : \"gray\"}`,\n            onClick: () => {\n              this.setState({\n                type: \"carrier\"\n              });\n            },\n            children: \"\\u042F \\u041F\\u0435\\u0440\\u0435\\u0432\\u043E\\u0437\\u0447\\u0438\\u043A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `tab f-16 left-angle ${this.state.type === \"cargo\" ? \"active\" : \"gray\"}`,\n            onClick: () => {\n              this.setState({\n                type: \"cargo\"\n              });\n            },\n            children: \"\\u042F \\u0412\\u043B\\u0430\\u0434\\u0435\\u043B\\u0435\\u0446 \\u0433\\u0440\\u0443\\u0437\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputPhone, {\n          error: this.state.errors.find(value => value.param === \"phone\"),\n          value: this.state.phone,\n          isVerified: this.state.isVerified,\n          phone: this.state.phone,\n          setVerified: val => {\n            this.setState({\n              isVerified: val\n            });\n          },\n          onChange: phone => {\n            this.setState({\n              phone\n            });\n          },\n          placeholder: \"+7 (_ _ _) _ _ _ - _ _ - _ _\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CSSTransitionGroup, {\n          transitionName: \"height-animation-item\",\n          transitionEnterTimeout: 500,\n          transitionLeaveTimeout: 1,\n          className: \"wrapper-animation\",\n          style: {\n            display: \"contents\"\n          },\n          children: this.state.isVerified === \"success\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  type: \"text\",\n                  error: this.state.errors.find(value => value.param === \"email\"),\n                  value: this.state.email,\n                  onChange: e => {\n                    this.setState({\n                      email: e.target.value\n                    });\n                  },\n                  className: \"col-12\",\n                  placeholder: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  type: \"text\",\n                  error: this.state.errors.find(value => value.param === \"lastName\"),\n                  value: this.state.lastName,\n                  onChange: e => {\n                    this.setState({\n                      lastName: e.target.value\n                    });\n                  },\n                  className: \"col-12\",\n                  placeholder: \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 col-sm-6 mb-custom\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  type: \"text\",\n                  error: this.state.errors.find(value => value.param === \"firstName\"),\n                  value: this.state.firstName,\n                  onChange: e => {\n                    this.setState({\n                      firstName: e.target.value\n                    });\n                  },\n                  placeholder: \"\\u0418\\u043C\\u044F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 col-sm-6\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  type: \"text\",\n                  error: this.state.errors.find(value => value.param === \"middleName\"),\n                  value: this.state.middleName,\n                  onChange: e => {\n                    this.setState({\n                      middleName: e.target.value\n                    });\n                  },\n                  placeholder: \"\\u041E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  type: \"password\",\n                  style: {\n                    paddingRight: 50\n                  },\n                  error: this.state.errors.find(value => value.param === \"password\"),\n                  value: this.state.password,\n                  onChange: e => {\n                    this.setState({\n                      password: e.target.value\n                    });\n                  },\n                  className: \"isHover\",\n                  placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-right f-12\",\n              children: [\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u044F\\u0441\\u044C, \\u0412\\u044B \\u0441\\u043E\\u0433\\u043B\\u0430\\u0448\\u0430\\u0435\\u0442\\u0435\\u0441\\u044C \\u0441\\xA0\", /*#__PURE__*/_jsxDEV(Link, {\n                to: this.props.settings.politicsPage,\n                className: \"href f-12\",\n                children: \"\\u043F\\u043E\\u043B\\u0438\\u0442\\u0438\\u043A\\u043E\\u0439 \\u043A\\u043E\\u043D\\u0444\\u0438\\u0434\\u0435\\u043D\\u0446\\u0438\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }, this), \" \", \"\\u0438\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n                to: this.props.settings.agreementPage,\n                className: \"href f-12\",\n                children: \"\\u0441\\u043E\\u0433\\u043B\\u0430\\u0448\\u0435\\u043D\\u0438\\u0435\\u043C \\u043E\\u0431 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0435 \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 .\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"fill\",\n                margin: \"0 0 0 auto\",\n                paddingHorizontal: \"15px\",\n                paddingVertical: \"8px\",\n                onClick: () => {\n                  this.register();\n                },\n                children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    settings: state.settings.settings\n  };\n};\n\nexport default connect(mapStateToProps)(withCookies(Register));","map":{"version":3,"sources":["E:/SSR/pages/register.js"],"names":["React","Input","configApi","toast","withCookies","CSSTransitionGroup","Button","InputPhone","Link","connect","Register","Component","type","country","email","firstName","middleName","lastName","phone","password","error","errors","isVerified","register","state","setState","isFetching","fetch","urlApi","method","headers","Accept","body","JSON","stringify","then","response","json","data","success","props","cookies","set","token","path","window","location","render","find","value","param","val","display","e","target","paddingRight","settings","politicsPage","agreementPage","mapStateToProps"],"mappings":"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","sourcesContent":["// App\r\nimport React from \"react\";\r\nimport Input from \"../Elements/Input\";\r\nimport configApi from \"../config/api\";\r\nimport { toast } from \"react-toastify\";\r\nimport { withCookies } from \"react-cookie\";\r\n// Elements\r\nimport { CSSTransitionGroup } from \"react-transition-group\";\r\nimport Button from \"../Elements/Button\";\r\nimport InputPhone from \"../Elements/InputPhone\";\r\n// Router\r\nimport Link from \"../Elements/Link\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass Register extends React.Component {\r\n  state = {\r\n    type: \"cargo\",\r\n    country: 1,\r\n    email: \"\",\r\n    firstName: \"\",\r\n    middleName: \"\",\r\n    lastName: \"\",\r\n    phone: \"\",\r\n    password: \"\",\r\n    error: false,\r\n    errors: [],\r\n    isVerified: false,\r\n  };\r\n\r\n  register() {\r\n    if (this.state.isVerified === \"success\") {\r\n      this.setState({ isFetching: true });\r\n      fetch(`${configApi.urlApi}/auth/register`, {\r\n        method: \"post\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          email: this.state.email,\r\n          phone: this.state.phone,\r\n          country: this.state.country,\r\n          type: this.state.type,\r\n          firstName: this.state.firstName,\r\n          middleName: this.state.middleName,\r\n          lastName: this.state.lastName,\r\n          password: this.state.password,\r\n        }),\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          if (data.error) {\r\n            if (data.error)\r\n              // data.errors.map((item) => {\r\n              //   toast.error(item.msg);\r\n              // });\r\n              this.setState({ error: true, errors: data.errors });\r\n          } else {\r\n            toast.success(\"Регистрация прошла успешно\");\r\n            this.props.cookies.set(\"apiToken\", data.token, {\r\n              path: \"/\",\r\n            });\r\n            window.location = \"/profile/info\";\r\n          }\r\n          this.setState({ isFetching: false });\r\n        });\r\n    } else toast.error(\"Подтвердите номер телефона\");\r\n  }\r\n\r\n  render() {\r\n    // let selectCountry = countryList.filter((item) => item.value !== 1);\r\n    return (\r\n      <div className=\"register-page\">\r\n        <h1 className=\"register-title\">Регистрация</h1>\r\n        <div className=\"register-form col-12 col-sm-9 col-md-6 col-lg-5 col-xl-4 mx-auto\">\r\n          <div className=\"row tabs justify-content-between\">\r\n            <div\r\n              className={`tab f-16 left-angle ${\r\n                this.state.type === \"carrier\" ? \"active \" : \"gray\"\r\n              }`}\r\n              onClick={() => {\r\n                this.setState({ type: \"carrier\" });\r\n              }}\r\n            >\r\n              Я Перевозчик\r\n            </div>\r\n            <div\r\n              className={`tab f-16 left-angle ${\r\n                this.state.type === \"cargo\" ? \"active\" : \"gray\"\r\n              }`}\r\n              onClick={() => {\r\n                this.setState({ type: \"cargo\" });\r\n              }}\r\n            >\r\n              Я Владелец груза\r\n            </div>\r\n          </div>\r\n          {/* <div className=\"row\">\r\n            <div className=\"col-12 col-sm-6 d-flex  align-items-center\">\r\n              Страна:\r\n              <span\r\n                className={`simple_select_city f-17-only col text-center ${\r\n                  this.state.country === 1 ? `active` : ``\r\n                } ml-3`}\r\n                onClick={(val) => {\r\n                  this.setState({ country: 1 });\r\n                }}\r\n              >\r\n                Россия\r\n              </span>\r\n            </div>\r\n            <div className=\"col-12 col-sm-6\">\r\n              <Select\r\n                options={selectCountry}\r\n                placeholder=\"Другая\"\r\n                className=\"f-17-only\"\r\n                onChange={(val) => {\r\n                  this.setState({ country: val.value });\r\n                }}\r\n                value={\r\n                  selectCountry.find(\r\n                    (item) => item.value === this.state.country\r\n                  ) || null\r\n                }\r\n              />\r\n            </div>\r\n          </div> */}\r\n          <InputPhone\r\n            error={this.state.errors.find((value) => value.param === \"phone\")}\r\n            value={this.state.phone}\r\n            isVerified={this.state.isVerified}\r\n            phone={this.state.phone}\r\n            setVerified={(val) => {\r\n              this.setState({ isVerified: val });\r\n            }}\r\n            onChange={(phone) => {\r\n              this.setState({ phone });\r\n            }}\r\n            placeholder=\"+7 (_ _ _) _ _ _ - _ _ - _ _\"\r\n          />\r\n          <CSSTransitionGroup\r\n            transitionName=\"height-animation-item\"\r\n            transitionEnterTimeout={500}\r\n            transitionLeaveTimeout={1}\r\n            className=\"wrapper-animation\"\r\n            style={{\r\n              display: \"contents\",\r\n            }}\r\n          >\r\n            {this.state.isVerified === \"success\" && (\r\n              <>\r\n                <div className=\"row\">\r\n                  <div className=\"col-12\">\r\n                    <Input\r\n                      type=\"text\"\r\n                      error={this.state.errors.find(\r\n                        (value) => value.param === \"email\"\r\n                      )}\r\n                      value={this.state.email}\r\n                      onChange={(e) => {\r\n                        this.setState({ email: e.target.value });\r\n                      }}\r\n                      className=\"col-12\"\r\n                      placeholder=\"Email\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-12\">\r\n                    <Input\r\n                      type=\"text\"\r\n                      error={this.state.errors.find(\r\n                        (value) => value.param === \"lastName\"\r\n                      )}\r\n                      value={this.state.lastName}\r\n                      onChange={(e) => {\r\n                        this.setState({ lastName: e.target.value });\r\n                      }}\r\n                      className=\"col-12\"\r\n                      placeholder=\"Фамилия\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-12 col-sm-6 mb-custom\">\r\n                    <Input\r\n                      type=\"text\"\r\n                      error={this.state.errors.find(\r\n                        (value) => value.param === \"firstName\"\r\n                      )}\r\n                      value={this.state.firstName}\r\n                      onChange={(e) => {\r\n                        this.setState({ firstName: e.target.value });\r\n                      }}\r\n                      placeholder=\"Имя\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-12 col-sm-6\">\r\n                    <Input\r\n                      type=\"text\"\r\n                      error={this.state.errors.find(\r\n                        (value) => value.param === \"middleName\"\r\n                      )}\r\n                      value={this.state.middleName}\r\n                      onChange={(e) => {\r\n                        this.setState({ middleName: e.target.value });\r\n                      }}\r\n                      placeholder=\"Отчество\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-12\">\r\n                    <Input\r\n                      type=\"password\"\r\n                      style={{ paddingRight: 50 }}\r\n                      error={this.state.errors.find(\r\n                        (value) => value.param === \"password\"\r\n                      )}\r\n                      value={this.state.password}\r\n                      onChange={(e) => {\r\n                        this.setState({ password: e.target.value });\r\n                      }}\r\n                      className=\"isHover\"\r\n                      placeholder=\"Пароль\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <p className=\"text-right f-12\">\r\n                  Регистрируясь, Вы соглашаетесь с&nbsp;\r\n                  <Link\r\n                    to={this.props.settings.politicsPage}\r\n                    className=\"href f-12\"\r\n                  >\r\n                    политикой конфиденциальности\r\n                  </Link>{\" \"}\r\n                  и{\" \"}\r\n                  <Link\r\n                    to={this.props.settings.agreementPage}\r\n                    className=\"href f-12\"\r\n                  >\r\n                    соглашением об обработке персональных данных .\r\n                  </Link>\r\n                </p>\r\n                <div className=\"text-right\">\r\n                  <Button\r\n                    type=\"fill\"\r\n                    margin={\"0 0 0 auto\"}\r\n                    paddingHorizontal={\"15px\"}\r\n                    paddingVertical={\"8px\"}\r\n                    onClick={() => {\r\n                      this.register();\r\n                    }}\r\n                  >\r\n                    Регистрация\r\n                  </Button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </CSSTransitionGroup>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    settings: state.settings.settings,\r\n  };\r\n};\r\nexport default connect(mapStateToProps)(withCookies(Register));\r\n"]},"metadata":{},"sourceType":"module"}