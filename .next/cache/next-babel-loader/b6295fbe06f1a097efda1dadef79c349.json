{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\SSR\\\\Modal\\\\FeedbackModal.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// App\nimport React from \"react\";\nimport Modal from \"react-modal\";\nimport Button from \"../Elements/Button\";\nimport Input from \"../Elements/Input\";\nimport Loading from \"../Elements/Loading\";\nimport settings from \"../config/settings.js\";\nimport api from \"../config/api.js\";\nimport CloseSVG from \"../img/close.svg\";\nimport { toast } from \"react-toastify\";\n\nclass FeedbackModal extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      isMailSend: false,\n      isFetching: false,\n      name: \"\",\n      phone: \"\"\n    });\n  }\n\n  send() {\n    if (this.state.phone.length !== 11) {\n      toast.error(\"Введите номер телефона\");\n      return 0;\n    }\n\n    if (!this.state.name.trim()) {\n      toast.error(\"Введите имя\");\n      return 0;\n    }\n\n    this.setState({\n      isFetching: true\n    }, () => {\n      fetch(`${api.urlApi}/api/page/sendMailCall`, {\n        method: \"post\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          phone: this.state.phone,\n          name: this.state.name\n        })\n      }).then(response => response.json()).then(({\n        error\n      }) => {\n        if (!error) {\n          this.setState({\n            isFetching: false\n          });\n          this.props.onRequestClose();\n          toast.success(\"Заказ звонка совершен успешно.Ожидайте звонка.\");\n        }\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: this.props.isOpen,\n      onRequestClose: this.props.onRequestClose,\n      className: \"col-10 col-md-6 col-lg-4 col-xl-3 col-md-6\",\n      style: settings.stylesModals,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"m-0 font-weight-normal text-center\",\n        children: \"\\u0417\\u0430\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"phone\",\n        className: \"my-2\",\n        onChange: val => {\n          this.setState({\n            phone: val\n          });\n        },\n        value: this.state.phone,\n        placeholder: \"+7 (_ _ _) _ _ _ - _ _ - _ _\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        value: this.state.name,\n        onChange: e => {\n          this.setState({\n            name: e.target.value\n          });\n        },\n        className: \"my-2\",\n        placeholder: \"\\u0418\\u043C\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: `d-block text-center f-14 mb-2 \n            ${this.state.isMailSend ? `visible` : `invisible`}`,\n          children: \"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435 \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u043E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), this.state.isFetching && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"small-loading\",\n          children: /*#__PURE__*/_jsxDEV(Loading, {\n            isLoading: this.state.isFetching\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), !this.state.isFetching && /*#__PURE__*/_jsxDEV(Button, {\n          type: \"fill\",\n          paddingVertical: \"11px\",\n          paddingHorizontal: \"25px\",\n          onClick: () => {\n            this.send();\n          },\n          children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: CloseSVG,\n        className: \"close-svg\",\n        onClick: this.props.onRequestClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default FeedbackModal;","map":{"version":3,"sources":["E:/SSR/Modal/FeedbackModal.js"],"names":["React","Modal","Button","Input","Loading","settings","api","CloseSVG","toast","FeedbackModal","Component","isMailSend","isFetching","name","phone","send","state","length","error","trim","setState","fetch","urlApi","method","headers","Accept","body","JSON","stringify","then","response","json","props","onRequestClose","success","render","isOpen","stylesModals","val","e","target","value"],"mappings":";;;;;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,GAAP,MAAgB,kBAAhB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,SAASC,KAAT,QAAsB,gBAAtB;;AACA,MAAMC,aAAN,SAA4BT,KAAK,CAACU,SAAlC,CAA4C;AAAA;AAAA;;AAAA,mCAClC;AACNC,MAAAA,UAAU,EAAE,KADN;AAENC,MAAAA,UAAU,EAAE,KAFN;AAGNC,MAAAA,IAAI,EAAE,EAHA;AAINC,MAAAA,KAAK,EAAE;AAJD,KADkC;AAAA;;AAO1CC,EAAAA,IAAI,GAAG;AACL,QAAI,KAAKC,KAAL,CAAWF,KAAX,CAAiBG,MAAjB,KAA4B,EAAhC,EAAoC;AAClCT,MAAAA,KAAK,CAACU,KAAN,CAAY,wBAAZ;AACA,aAAO,CAAP;AACD;;AACD,QAAI,CAAC,KAAKF,KAAL,CAAWH,IAAX,CAAgBM,IAAhB,EAAL,EAA6B;AAC3BX,MAAAA,KAAK,CAACU,KAAN,CAAY,aAAZ;AACA,aAAO,CAAP;AACD;;AAED,SAAKE,QAAL,CAAc;AAAER,MAAAA,UAAU,EAAE;AAAd,KAAd,EAAoC,MAAM;AACxCS,MAAAA,KAAK,CAAE,GAAEf,GAAG,CAACgB,MAAO,wBAAf,EAAwC;AAC3CC,QAAAA,MAAM,EAAE,MADmC;AAE3CC,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAE,kBADD;AAEP,0BAAgB;AAFT,SAFkC;AAM3CC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBd,UAAAA,KAAK,EAAE,KAAKE,KAAL,CAAWF,KADC;AAEnBD,UAAAA,IAAI,EAAE,KAAKG,KAAL,CAAWH;AAFE,SAAf;AANqC,OAAxC,CAAL,CAWGgB,IAXH,CAWSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAXtB,EAYGF,IAZH,CAYQ,CAAC;AAAEX,QAAAA;AAAF,OAAD,KAAe;AACnB,YAAI,CAACA,KAAL,EAAY;AACV,eAAKE,QAAL,CAAc;AAAER,YAAAA,UAAU,EAAE;AAAd,WAAd;AACA,eAAKoB,KAAL,CAAWC,cAAX;AACAzB,UAAAA,KAAK,CAAC0B,OAAN,CAAc,gDAAd;AACD;AACF,OAlBH;AAmBD,KApBD;AAqBD;;AACDC,EAAAA,MAAM,GAAG;AACP,wBACE,QAAC,KAAD;AACE,MAAA,MAAM,EAAE,KAAKH,KAAL,CAAWI,MADrB;AAEE,MAAA,cAAc,EAAE,KAAKJ,KAAL,CAAWC,cAF7B;AAGE,MAAA,SAAS,EAAC,4CAHZ;AAIE,MAAA,KAAK,EAAE5B,QAAQ,CAACgC,YAJlB;AAAA,8BAME;AAAI,QAAA,SAAS,EAAC,oCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANF,eAOE,QAAC,KAAD;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,SAAS,EAAC,MAFZ;AAGE,QAAA,QAAQ,EAAGC,GAAD,IAAS;AACjB,eAAKlB,QAAL,CAAc;AAAEN,YAAAA,KAAK,EAAEwB;AAAT,WAAd;AACD,SALH;AAME,QAAA,KAAK,EAAE,KAAKtB,KAAL,CAAWF,KANpB;AAOE,QAAA,WAAW,EAAC;AAPd;AAAA;AAAA;AAAA;AAAA,cAPF,eAgBE,QAAC,KAAD;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,KAAK,EAAE,KAAKE,KAAL,CAAWH,IAFpB;AAGE,QAAA,QAAQ,EAAG0B,CAAD,IAAO;AACf,eAAKnB,QAAL,CAAc;AAAEP,YAAAA,IAAI,EAAE0B,CAAC,CAACC,MAAF,CAASC;AAAjB,WAAd;AACD,SALH;AAME,QAAA,SAAS,EAAC,MANZ;AAOE,QAAA,WAAW,EAAC;AAPd;AAAA;AAAA;AAAA;AAAA,cAhBF,eAyBE;AAAG,QAAA,SAAS,EAAC,YAAb;AAAA,gCACE;AACE,UAAA,SAAS,EAAG;AACxB,cAAc,KAAKzB,KAAL,CAAWL,UAAX,GAAyB,SAAzB,GAAqC,WAAW,EAFpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAOG,KAAKK,KAAL,CAAWJ,UAAX,iBACC;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA,iCACE,QAAC,OAAD;AAAS,YAAA,SAAS,EAAE,KAAKI,KAAL,CAAWJ;AAA/B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBARJ,EAYG,CAAC,KAAKI,KAAL,CAAWJ,UAAZ,iBACC,QAAC,MAAD;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,eAAe,EAAE,MAFnB;AAGE,UAAA,iBAAiB,EAAE,MAHrB;AAIE,UAAA,OAAO,EAAE,MAAM;AACb,iBAAKG,IAAL;AACD,WANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAzBF,eAkDE;AACE,QAAA,GAAG,EAAER,QADP;AAEE,QAAA,SAAS,EAAC,WAFZ;AAGE,QAAA,OAAO,EAAE,KAAKyB,KAAL,CAAWC;AAHtB;AAAA;AAAA;AAAA;AAAA,cAlDF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AA0DD;;AAlGyC;;AAqG5C,eAAexB,aAAf","sourcesContent":["// App\r\nimport React from \"react\";\r\nimport Modal from \"react-modal\";\r\nimport Button from \"../Elements/Button\";\r\nimport Input from \"../Elements/Input\";\r\nimport Loading from \"../Elements/Loading\";\r\nimport settings from \"../config/settings.js\";\r\nimport api from \"../config/api.js\";\r\nimport CloseSVG from \"../img/close.svg\";\r\nimport { toast } from \"react-toastify\";\r\nclass FeedbackModal extends React.Component {\r\n  state = {\r\n    isMailSend: false,\r\n    isFetching: false,\r\n    name: \"\",\r\n    phone: \"\",\r\n  };\r\n  send() {\r\n    if (this.state.phone.length !== 11) {\r\n      toast.error(\"Введите номер телефона\");\r\n      return 0;\r\n    }\r\n    if (!this.state.name.trim()) {\r\n      toast.error(\"Введите имя\");\r\n      return 0;\r\n    }\r\n\r\n    this.setState({ isFetching: true }, () => {\r\n      fetch(`${api.urlApi}/api/page/sendMailCall`, {\r\n        method: \"post\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          phone: this.state.phone,\r\n          name: this.state.name,\r\n        }),\r\n      })\r\n        .then((response) => response.json())\r\n        .then(({ error }) => {\r\n          if (!error) {\r\n            this.setState({ isFetching: false });\r\n            this.props.onRequestClose();\r\n            toast.success(\"Заказ звонка совершен успешно.Ожидайте звонка.\");\r\n          }\r\n        });\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <Modal\r\n        isOpen={this.props.isOpen}\r\n        onRequestClose={this.props.onRequestClose}\r\n        className=\"col-10 col-md-6 col-lg-4 col-xl-3 col-md-6\"\r\n        style={settings.stylesModals}\r\n      >\r\n        <h3 className=\"m-0 font-weight-normal text-center\">Заказать звонок</h3>\r\n        <Input\r\n          type=\"phone\"\r\n          className=\"my-2\"\r\n          onChange={(val) => {\r\n            this.setState({ phone: val });\r\n          }}\r\n          value={this.state.phone}\r\n          placeholder=\"+7 (_ _ _) _ _ _ - _ _ - _ _\"\r\n        />\r\n        <Input\r\n          type=\"text\"\r\n          value={this.state.name}\r\n          onChange={(e) => {\r\n            this.setState({ name: e.target.value });\r\n          }}\r\n          className=\"my-2\"\r\n          placeholder=\"Имя\"\r\n        />\r\n        <p className=\"text-right\">\r\n          <span\r\n            className={`d-block text-center f-14 mb-2 \r\n            ${this.state.isMailSend ? `visible` : `invisible`}`}\r\n          >\r\n            Сообщение отправлено\r\n          </span>\r\n          {this.state.isFetching && (\r\n            <div className=\"small-loading\">\r\n              <Loading isLoading={this.state.isFetching} />\r\n            </div>\r\n          )}\r\n          {!this.state.isFetching && (\r\n            <Button\r\n              type=\"fill\"\r\n              paddingVertical={\"11px\"}\r\n              paddingHorizontal={\"25px\"}\r\n              onClick={() => {\r\n                this.send();\r\n              }}\r\n            >\r\n              Отправить\r\n            </Button>\r\n          )}\r\n        </p>\r\n        <img\r\n          src={CloseSVG}\r\n          className=\"close-svg\"\r\n          onClick={this.props.onRequestClose}\r\n        />\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FeedbackModal;\r\n"]},"metadata":{},"sourceType":"module"}