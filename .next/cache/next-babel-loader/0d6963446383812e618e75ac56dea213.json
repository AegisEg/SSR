{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\SSR\\\\Partials\\\\TariffStatus.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport Link from \"../Elements/Link\";\nimport Warning from \"../img/warning.svg\";\nimport Button from \"../Elements/Button\";\n\nclass TariffStatus extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      showTariffPop: false\n    });\n\n    _defineProperty(this, \"showTariffPop\", () => {\n      this.setState({\n        showTariffPop: true\n      });\n      document.addEventListener(\"click\", this.hideTariffPop);\n    });\n\n    _defineProperty(this, \"hideTariffPop\", e => {\n      if (!this.isClicked(\"tariff-popup\", e)) {\n        this.setState({\n          showTariffPop: false\n        });\n        document.removeEventListener(\"click\", this.hideTariffPop);\n      }\n    });\n  }\n\n  isClicked(id, e) {\n    return document.getElementById(id).contains(e.target);\n  }\n\n  diffDates(day_one, day_two) {\n    return (day_one - day_two) / (60 * 60 * 24 * 1000);\n  }\n\n  render() {\n    if (this.props.isBan) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          cursor: \"pointer\",\n          width: \"75px\",\n          marginRight: \"5px\"\n        },\n        className: \"header-profile tariff-pop text-center f-12\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"notTariff\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: Warning,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 13\n          }, this), \" \\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C \\u0437\\u0430\\u0431\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this);\n    } else {\n      let tariff;\n      if (this.props.expiriesAt && this.props.tariff) tariff = this.props.tariff;\n      if (this.props.expiriesAt && !this.props.tariff) tariff = {\n        name: \"Тариф Возврат\",\n        isDemo: true\n      };\n      if (!this.props.expiriesAt && !this.props.tariff) tariff = false;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          cursor: \"pointer\",\n          width: \"75px\",\n          marginRight: \"5px\"\n        },\n        id: \"tariff-popup\",\n        className: \"header-profile tariff-pop text-center f-12\",\n        onClick: () => {\n          this.showTariffPop();\n        },\n        children: [tariff && this.diffDates(new Date(this.props.expiriesAt), new Date()) <= 3 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [tariff.name, \" \", tariff.isDemo ? \"активен\" : \"оплачен\", \" \\u0434\\u043E\", \" \", new Date(this.props.expiriesAt).toDateR()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }, this), this.state.showTariffPop && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pop-block\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u0414\\u043E \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044F \\u0442\\u0430\\u0440\\u0438\\u0444\\u0430 \\u043E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C\", \" \", Math.ceil(this.diffDates(new Date(this.props.expiriesAt), new Date())), \" \", Math.ceil(this.diffDates(new Date(this.props.expiriesAt), new Date())) === 1 && \"день.\", Math.ceil(this.diffDates(new Date(this.props.expiriesAt), new Date())) > 1 && \"дня.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u0415\\u0441\\u043B\\u0438 \\u0435\\u0433\\u043E \\u043D\\u0435 \\u043F\\u0440\\u043E\\u0434\\u043B\\u0438\\u0442\\u044C - \\u0432\\u0430\\u0448 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C \\u0438 \\u043F\\u0440\\u0435\\u0434\\u043B\\u0436\\u0435\\u043D\\u0438\\u044F \\u0431\\u0443\\u0434\\u0443\\u0442 \\u0441\\u043A\\u0440\\u044B\\u0442\\u044B \\u0434\\u043B\\u044F \\u0434\\u0440\\u0443\\u0433\\u0438\\u0445 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439.\", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"\\u0412\\u044B \\u043D\\u0435 \\u0441\\u043C\\u043E\\u0436\\u0435\\u0442\\u0435 \\u0431\\u0440\\u0430\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\\u044B.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              href: \"/mytarif\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"fill\",\n                className: \"mt-2\",\n                children: \"\\u041F\\u0440\\u043E\\u0434\\u043B\\u0438\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true), tariff && this.diffDates(new Date(this.props.expiriesAt), new Date()) > 3 && /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/mytarif\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [tariff.name, \" \", tariff.isDemo ? \"активен\" : \"оплачен\", \" \\u0434\\u043E\", \" \", new Date(this.props.expiriesAt).toDateR()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n}\n\nexport default TariffStatus;","map":{"version":3,"sources":["E:/SSR/Partials/TariffStatus.js"],"names":["React","Link","Warning","Button","TariffStatus","Component","showTariffPop","setState","document","addEventListener","hideTariffPop","e","isClicked","removeEventListener","id","getElementById","contains","target","diffDates","day_one","day_two","render","props","isBan","cursor","width","marginRight","tariff","expiriesAt","name","isDemo","Date","toDateR","state","Math","ceil"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Link from \"../Elements/Link\";\r\nimport Warning from \"../img/warning.svg\";\r\nimport Button from \"../Elements/Button\";\r\nclass TariffStatus extends React.Component {\r\n  state = { showTariffPop: false };\r\n  showTariffPop = () => {\r\n    this.setState({ showTariffPop: true });\r\n    document.addEventListener(\"click\", this.hideTariffPop);\r\n  };\r\n  isClicked(id, e) {\r\n    return document.getElementById(id).contains(e.target);\r\n  }\r\n  hideTariffPop = (e) => {\r\n    if (!this.isClicked(\"tariff-popup\", e)) {\r\n      this.setState({ showTariffPop: false });\r\n      document.removeEventListener(\"click\", this.hideTariffPop);\r\n    }\r\n  };\r\n  diffDates(day_one, day_two) {\r\n    return (day_one - day_two) / (60 * 60 * 24 * 1000);\r\n  }\r\n  render() {\r\n    if (this.props.isBan) {\r\n      return (\r\n        <div\r\n          style={{ cursor: \"pointer\", width: \"75px\", marginRight: \"5px\" }}\r\n          className=\"header-profile tariff-pop text-center f-12\"\r\n        >\r\n          <span className=\"notTariff\">\r\n            <img src={Warning} alt=\"\" /> Профиль заблокирован\r\n          </span>\r\n        </div>\r\n      );\r\n    } else {\r\n      let tariff;\r\n      if (this.props.expiriesAt && this.props.tariff)\r\n        tariff = this.props.tariff;\r\n      if (this.props.expiriesAt && !this.props.tariff)\r\n        tariff = {\r\n          name: \"Тариф Возврат\",\r\n          isDemo: true,\r\n        };\r\n      if (!this.props.expiriesAt && !this.props.tariff) tariff = false;\r\n      return (\r\n        <div\r\n          style={{ cursor: \"pointer\", width: \"75px\", marginRight: \"5px\" }}\r\n          id=\"tariff-popup\"\r\n          className=\"header-profile tariff-pop text-center f-12\"\r\n          onClick={() => {\r\n            this.showTariffPop();\r\n          }}\r\n        >\r\n          {/* {!this.props.expiriesAt && !tariff && (\r\n            <>\r\n              <span className=\"notTariff\">\r\n                <img src={Warning} alt=\"\" /> Профиль скрыт\r\n              </span>\r\n              {this.state.showTariffPop && (\r\n                <div className=\"pop-block\">\r\n                  <p>\r\n                    Ваш профиль и предложения скрыты.{\" \"}\r\n                    <b>Вы не можете брать заказы.</b>\r\n                  </p>\r\n                  <p>\r\n                    Оплатите тариф PRO или включите тариф ДЕМО для активации\r\n                    профиля.\r\n                  </p>\r\n                  <Link href=\"/mytarif\">\r\n                    <Button type=\"fill\" className=\"mt-2\">\r\n                      Продлить\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              )}\r\n            </>\r\n          )} */}\r\n\r\n          {tariff &&\r\n            this.diffDates(new Date(this.props.expiriesAt), new Date()) <=\r\n              3 && (\r\n              <>\r\n                <span>\r\n                  {tariff.name} {tariff.isDemo ? \"активен\" : \"оплачен\"} до{\" \"}\r\n                  {new Date(this.props.expiriesAt).toDateR()}\r\n                </span>\r\n                {this.state.showTariffPop && (\r\n                  <div className=\"pop-block\">\r\n                    <p>\r\n                      До окончания тарифа осталось{\" \"}\r\n                      {Math.ceil(\r\n                        this.diffDates(\r\n                          new Date(this.props.expiriesAt),\r\n                          new Date()\r\n                        )\r\n                      )}{\" \"}\r\n                      {Math.ceil(\r\n                        this.diffDates(\r\n                          new Date(this.props.expiriesAt),\r\n                          new Date()\r\n                        )\r\n                      ) === 1 && \"день.\"}\r\n                      {Math.ceil(\r\n                        this.diffDates(\r\n                          new Date(this.props.expiriesAt),\r\n                          new Date()\r\n                        )\r\n                      ) > 1 && \"дня.\"}\r\n                    </p>\r\n                    <p>\r\n                      Если его не продлить - ваш профиль и предлжения будут\r\n                      скрыты для других пользователей.\r\n                      <b>Вы не сможете брать заказы.</b>\r\n                    </p>\r\n                    <Link href=\"/mytarif\">\r\n                      <Button type=\"fill\" className=\"mt-2\">\r\n                        Продлить\r\n                      </Button>\r\n                    </Link>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          {tariff &&\r\n            this.diffDates(new Date(this.props.expiriesAt), new Date()) > 3 && (\r\n              <Link href=\"/mytarif\">\r\n                <span>\r\n                  {tariff.name} {tariff.isDemo ? \"активен\" : \"оплачен\"} до{\" \"}\r\n                  {new Date(this.props.expiriesAt).toDateR()}\r\n                </span>\r\n              </Link>\r\n            )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\nexport default TariffStatus;\r\n"]},"metadata":{},"sourceType":"module"}